<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비동기</title>
</head>
<body>
    <h1>01. 비동기</h1>
    <pre>
    <b>
     자바스크립트는 자바와는 다르게 한 번에 하나의 태스크(과정)만 실행할 수있는 싱글 스레드 방식으로 동작을 하게 된다.
    </b>
    때문에 처리에 시간이 걸리는 태스크를 실행하는 경우 블로킹(작업중단)이 발생하게 된다.
    </pre>

    <h3> 동기 처리</h3>
    <pre>
        현재 실행중인 태스크가 종료될 때까지 다음에 실행 될 태스크가 대기하는 방식을 동기처리하고 한다.
        장점 : 작업을 순서대로 하나씩 처리하기 때문에
               실행 순서의 보장을 할 수 있다.
        단점 : 앞선 작업이 끝날 때까지 뒤에 작업 불가능
               즉, 블로킹
    </pre>
    <script>
        function sleep(func , delay) {
                             // 현재시간 return
            const delayUntil =Date.now() + delay;
            //루프로 시간끌기
            while(Date.now() < delayUntil);
        }
        
        function delay(){
            console.log('실행 시간을 늦추고 싶습니다.');
        }

        function start(){
            console.log('바로 실행되고 싶어요');
        }

        // sleep 함수는 3초 이상 실행이 된다.
        //sleep(delay,3000);
        // start 함수는 먼저 실행되고 싶어도
        // sleep 함수가 끝날 때까지 대기할 수 밖에 없다.
       // start();
    </script>

    <h3>비동기 처리 </h3>
    <pre>
        현재 실행중인 태스크가 종료 되지 않는 상태라고 해도
        다음 실행 할 태스크를 곧바로 실행하는 방식을
        비동기 처리라고 한다.

        장점: 직업이 블로킹 되지 않는다.
        단점: 실행 순서를 보장할 수 없다.
    </pre>
    <script>
        /*
        setTimeout, setInterval,  이벤트 핸들러 HTTP 요청 등은
        비동기 처리 방식으로 동작한다.
        */
    //    sleep(delay,3000);
    // 콜백함수인 delay 를 실행한다.
    // 
       setTimeout(delay,3000);
       start();

       /*
       태스크 큐
       setTimeout 함수나 interval 함수 과 같은 비동기 함수의 콜백함수
       보관 되는 공간이다
       */

       /*
       이렇게 대기 했다가 들어가는 과정을 
       이벤트 루프는 콜 스택에 현재 실행중인
       실행 컨텍스트가 있는 지, 
       그리고 태스크 큐에 대기 중인 함수가
       있는 지를 반복해서 확인 해준다.
       만약 콜 스택 영역이 비어있고
       태스크 큐에 대기중인 함수가 있으면
       순차적(fifo) 으로 태스크 큐에 
       대기중인 함수를 콜 스택 이동시켜 실행한다.
       */
    </script>
</body>
</html>